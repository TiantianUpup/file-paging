# file-paging

### file-paging介绍
file-paging是将文件按大小【比如1024byte】进行分页显示的demo，当你找到这个仓库的时候，说明你也有这种鬼需求了。不用担心，看完demo你就知道如何处理了

### file-paging实现介绍
实现文件按照大小进行分页的**难点**主要有：
- 文件如何读取指定大小，比如一次只读1024byte的内容
- 文件按照大小读取出现的乱码问题，比如读取5byte，文件内容为:a中文，在UTF-8编码下该内容为7byte，读取5byte的内容为5中?，即会出现中文乱码的问题
针对第一个难点比较容易实现，直接指定读取的字节大小，例如：fileInputStream.read(readBuffer)  
针对第二个难点首先需要解决的如何判断读取到的内容中有乱码，解决这个的方案是将读取到的内容转换为byte数组，因为出现乱码的只有可能是最后一个中文，因此判断最后一个字节的值时候小于0，小于0就出现了乱码，因为a-Z的ASCII码为整数。  
顺着思路，如果检查到出现乱码，就少读几个字节数，比如在UTF-8编码下少读三个字节，在UTF-8编码下中文占三个字节。因为只有在对文件进行读取后才知道是否读到乱码，需要回退读的内容少读三个字节，这个在流里面比较难实现，因为流是不可逆的，就是都了一部分想回一点是实现不了的，除非重新读。  
为了解决回退读的内容，实现思路是使用两个流去读写同一个文件，其中一个流用于判断是否出现乱码，另外一个流用于读取内容，出现乱码读取内容的流就少读取三个字节。同时，两个流读取到流的位置需一致，不能相差3byte*N

### file-paging使用
                  